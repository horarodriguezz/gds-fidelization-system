---
import {
  Store,
  Gift,
  LayoutDashboard,
  Settings,
  ShoppingCart,
  UserCog,
  Users,
} from "@lucide/astro";
import { Pathname } from "@/config/Pathname";

import { APP_NAME } from "../../../config/app";
import LogoutButton from "./LogoutButton";
import MyInfo from "./MyInfo";
import SidebarItem from "./SidebarItem.astro";
import { Role } from "../../../api/types/Enums/Role";

interface Props {
  onNavigate?: () => void;
}

const { user } = Astro.locals;

const navigation = [
  {
    name: "Dashboard",
    href: Pathname.BUSINESS_DASHBOARD,
    icon: LayoutDashboard,
  },
  {
    name: "Clientes",
    href: Pathname.BUSINESS_CLIENTS,
    icon: Users,
  },
  {
    name: "Ventas",
    href: Pathname.BUSINESS_SALES,
    icon: ShoppingCart,
  },
  {
    name: "Recompensas",
    href: Pathname.BUSINESS_REWARDS,
    icon: Gift,
    hide: user.role === Role.USER,
  },
  {
    name: "Usuarios",
    href: Pathname.BUSINESS_USERS,
    icon: UserCog,
    hide: user.role === Role.USER,
  },
  {
    name: "Configuraci√≥n",
    href: Pathname.BUSINESS_SETTINGS,
    icon: Settings,
    hide: user.role === Role.USER,
  },
];
---

<aside
  class='flex h-full w-full flex-col border-r border-sidebar-border bg-sidebar lg:fixed lg:left-0 lg:top-0 lg:z-40 lg:h-screen lg:w-64'
>
  <div class='flex h-full flex-col'>
    <div
      class='hidden h-16 items-center gap-2 border-b border-sidebar-border px-6 lg:flex'
    >
      <div
        class='flex h-10 w-10 items-center justify-center rounded-lg bg-sidebar-primary'
      >
        <Store class='h-6 w-6 text-sidebar-primary-foreground' />
      </div>
      <div class='flex flex-col'>
        <span class='text-base font-semibold text-sidebar-foreground'
          >{APP_NAME}</span
        >
        <span class='text-xs text-muted-foreground'>Sistema de puntos</span>
      </div>
    </div>

    <nav class='flex-1 space-y-1 p-4'>
      {
        navigation
          .filter((item) => !item.hide)
          .map((item) => <SidebarItem {...item} />)
      }
    </nav>

    <div class='border-t border-sidebar-border p-4'>
      <LogoutButton client:load />

      <MyInfo user={user} client:load />
    </div>
  </div>
</aside>
